<style>
    .labelVeiculo {
        display: block;
        height: 35px;
        text-align: left;
        vertical-align: middle;
        white-space: nowrap;
        overflow: hidden;
    }

        /*.app-header {
        display: none;
    }*/


        .labelVeiculo span {
            display: inline-block;
            width: 80%;
            margin-top: 8px;
            overflow: hidden;
        }

    .inputEsquema {
        height: 30px;
    }

    #btnEsquema {
        height: 80px !important;
        line-height: 20px !important;
        border-radius: 0px 35px 0px 0px;
    }

    #tbDigitacaoEsquema td {
        padding: 5px 5px !important;
        white-space: nowrap;
        text-align: center;
    }

    #tbDigitacaoEsquema .input-group {
        margin-bottom: 0px;
    }


    .td-insercoes {
        width: 30px !important;
        padding-left: 2px !important;
        padding-right: 2px !important;
        text-align: center !important;
    }

    #tbMidia td, #tbMidia th {
        padding: 2px 2px 2px 2px !important;
        text-align: center !important;
        vertical-align: middle !important;
        font-size: 11px !important;
        white-space: nowrap;
        height: 30px !important;
    }

    #tableTotalizador tr td {
        padding: 5px;
    }
</style>
<div class="container">
    <form id="frmSimulacao" autocomplete="off">
        <div class="app-container">
            <!--================================Dados Base-->
            <div class="block" id="divDadosBase" ng-show="currentShow=='Base'">
                <div class="alert alert-warning alert-icon-block" role="alert">
                    <div class="alert-icon">
                        <span class="icon-checkmark-circle"></span>
                    </div>
                    <strong class="pull-right">Dados Base</strong>
                    <button class="btn btn-danger btn-icon-fixed btn-sm"
                            ng-show="Simulacao.Indica_Inconsistencia"
                            ng-click="MostrarInconsistencias(Simulacao.Id_Simulacao)"
                            style="margin:0px 0px 0px 0px;">
                        <span class="fa fa-exclamation-triangle" ng-disabled="true"></span>Inconsistências
                    </button>

                    <button class="btn btn-default btn-icon-fixed btn-sm pull-left"
                            ng-show="Parameters.Action == 'New' && Parameters.Processo == 'P'"
                            ng-click="SelecionarImportacao()"
                            style="margin:0px 0px 0px 0px;margin-right:50px">
                        <span class="fa fa-upload" ng-disabled="true"></span> Importar Modelo
                    </button>

                </div>
                <div class="row">
                    <div class="col-md-8">
                        <div class="block block-condensed">
                            <div class="row  padding-right-10 padding-left-10">
                                <!--==============================================Id da Simulacao-->
                                <div class="col-md-1">
                                    <div class="form-group">
                                        <label for="txtIdSimulacao" class="field-x">#Id</label>
                                        <div class="input-group">
                                            <input type="text"
                                                   Id="txtIdSimulacao"
                                                   class="form-control"
                                                   ng-model="Simulacao.Id_Simulacao"
                                                   disabled="disabled">
                                        </div>
                                    </div>
                                </div>
                                <!---==============================================Identificacao-->
                                <div class="col-md-5" ng-controller="dictionaryController">
                                    <div class="dictionary" dictionary="Simulacao_Identificacao">
                                        <input id="txtSimulacao_Identificacao"
                                               ng-model="Simulacao.Identificacao"
                                               ng-disabled="!Simulacao.Permite_Editar"
                                               ng-model-options="{updateOn: 'blur'}">
                                    </div>
                                </div>
                                <!--==============================================Validade Inicio-->
                                <div class="col-md-3">
                                    <div class="dictionary" dictionary="Data" caption="Início Validade">
                                        <input ng-model="Simulacao.Validade_Inicio"
                                               ng-disabled="!Simulacao.Permite_Editar"
                                               ui-date ng-model-options="{updateOn: 'blur'}">
                                        <div class="dictionary-ui-calendar" ui-calendar typdate="Simulacao.Validade_Inicio"></div>
                                    </div>
                                </div>
                                <!--==============================================Validade Termino-->
                                <div class="col-md-3">
                                    <div class="dictionary" dictionary="Data" caption="Término Validade">
                                        <input ng-model="Simulacao.Validade_Termino"
                                               ng-disabled="!Simulacao.Permite_Editar"
                                               ui-date ng-model-options="{updateOn: 'blur'}">
                                        <div class="dictionary-ui-calendar" ui-calendar typdate="Simulacao.Validade_Termino"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row  padding-right-10 padding-left-10">
                                <!--==============================================Empresa de Venda-->
                                <div class="col-md-3" ng-controller="dictionaryController">
                                    <div class="dictionary" dictionary="Empresa_Usuario">
                                        <input id="txtCodEmpresa"
                                               ng-disabled="!Simulacao.Permite_Editar"
                                               ng-model="Simulacao.Cod_Empresa_Venda"
                                               ng-model-options="{updateOn: 'blur'}"
                                               ng-change="DicionaryValidate('txtCodEmpresa');ChangePendenteCalculo()"
                                               primarybind="txtCodEmpresa"
                                               secondarybind="txtNomeEmpresa">
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="txtNomeEmpresa" class="field-x" style="visibility:hidden">..</label>
                                        <div class="input-group">
                                            <input type="text" disabled="disabled" id="txtNomeEmpresa" class="form-control " ng-model="Simulacao.Nome_Empresa_Venda">
                                        </div>
                                    </div>
                                </div>
                                <!--============================Tabela de Precos-->
                                <div class="col-md-4">
                                    <div class="dictionary" dictionary="Competencia" caption="Tabela de Preços">
                                        <input ng-model="Simulacao.Tabela_Preco"
                                               ng-disabled="!Simulacao.Permite_Editar"
                                               ui-MesAno ng-model-options="{updateOn: 'blur'}"
                                               placeholder="Vigente">
                                        <div class="dictionary-ui-competencia" ui-Competencia typmesano="Simulacao.Tabela_Preco" params="TabelaPrecoKeys"></div>
                                    </div>
                                </div>
                            </div>
                            <!--=============================Valor Informado-->
                            <div class="row  padding-right-10 padding-left-10 margin-bottom-20">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="field-x" for="txtValorInformado">Valor Informado</label>
                                        <div class="input-group">
                                            <div class="input-group-addon" ng-show="!Simulacao.Indica_Sem_Midia">
                                                <div class="app-checkbox" style="width:auto;margin-top:5px">
                                                    <label>
                                                        <input type="checkbox"
                                                               name="app-checkbox-1"
                                                               ng-model="Simulacao.Fixar_Valor"
                                                               ng-disabled="!Simulacao.Permite_Editar"
                                                               ng-change="ChangePendenteCalculo()"
                                                               ng-click="Fixar('Valor')"> &nbsp;&nbsp;Fixar<span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <input id="txtValorInformado"
                                                   type="text" class="form-control money"
                                                   maxlength="15"
                                                   ng-disabled="(!Simulacao.Fixar_Valor || Simulacao.Fixar_Desconto || !Simulacao.Permite_Editar) && !Simulacao.Indica_Sem_Midia"
                                                   style="text-align:right"
                                                   ng-model="Simulacao.Valor_Informado"
                                                   ng-change="ChangePendenteCalculo()"
                                                   ng-model-options="{updateOn: 'blur'}" />
                                        </div>
                                    </div>
                                </div>
                                <!--=============================Desconto Padrao-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="field-x" for="txtValorTabela">Desconto Padrão</label>
                                        <div class="input-group">
                                            <div class="input-group-addon" ng-show="!Simulacao.Indica_Sem_Midia">
                                                <div class="app-checkbox" style="width:auto;margin-top:5px">
                                                    <label>
                                                        <input type="checkbox"
                                                               name="app-checkbox-1"
                                                               ng-disabled="!Simulacao.Permite_Editar"
                                                               ng-model="Simulacao.Fixar_Desconto"
                                                               ng-change="ChangePendenteCalculo()"
                                                               ng-click="Fixar('Desconto')"> &nbsp;&nbsp;Fixar<span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <input type="text" class="form-control percent"
                                                   ng-disabled="(Simulacao.Fixar_Valor || !Simulacao.Fixar_Desconto || !Simulacao.Permite_Editar) && !Simulacao.Indica_Sem_Midia"
                                                   ng-model="Simulacao.Desconto_Padrao"
                                                   maxlength="10"
                                                   style="text-align:right"
                                                   ng-change="ChangePendenteCalculo()"
                                                   ng-model-options="{updateOn: 'blur'}" />
                                        </div>
                                    </div>
                                </div>
                                <!--=============================Pacote de Descontos-->
                                <div class="col-md-2" ng-controller="dictionaryController">
                                    <div class="dictionary" dictionary="Pacote_Desconto">
                                        <input id="txtId_Pacote"
                                               ng-disabled="Simulacao.Fixar_Valor || !Simulacao.Permite_Editar"
                                               ng-model="Simulacao.Id_Pacote"
                                               ng-model-options="{updateOn: 'blur'}"
                                               ng-change="DicionaryValidate('txtId_Pacote');ChangePendenteCalculo()"
                                               primarybind="txtId_Pacote"
                                               secondarybind="txtDescricao_Pacote">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="txtDescricao_Pacote" class="field-x" style="visibility:hidden">..</label>
                                        <div class="input-group">
                                            <input type="text" disabled="disabled" id="txtDescricao_Pacote" class="form-control " ng-model="Simulacao.Descricao_Pacote">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row  padding-right-10 padding-left-10 margin-bottom-20">
                                <!--==========================Sem Midia-->
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="app-checkbox">
                                                <label>
                                                    <input type="checkbox"
                                                           name="app-checkbox-1"
                                                           ng-change="Indica_Sem_Midia_Change(Indica_Sem_Midia)"
                                                           ng-model="Indica_Sem_Midia" />
                                                    {{Descricao_Processo}}&nbsp; Sem Midia
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--========================Totais da Simulacao-->
                    <div>
                        <div class="col-md-4">
                            <div class="block block-condensed" style="padding:10px !important">
                                <div class="row">
                                    <div class="col-md-12">
                                        <table id="tableTotalizador" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th colspan="2">
                                                        <button class="btn btn-sm btn-primary margin-right-10 btntab"  
                                                                ng-repeat="total in Simulacao.Totalizadores track by $index" 
                                                                ng-click="SetTotalizadorIndex($index)"
                                                                ng-style="{'background-color':($index==TotalizadorIndex) ?'orange':'black'}">{{total.Nome_Rede}}</button>
                                                    </th>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Total {{Simulacao.Totalizadores[TotalizadorIndex].Nome_Rede}}
                                                    </th>
                                                    <th style="text-align:right;height:60px">
                                                        <button class="btn btn-default btn-sm" id="btnFixarTopo" style="display:inline-block; margin:0px 0px 0px 0px">
                                                            Fixar no topo
                                                        </button>
                                                    </th>
                                                </tr>

                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Valor Tabela</td>
                                                    <td style="text-align:right">
                                                        {{Simulacao.Totalizadores[TotalizadorIndex].Valor_Total_Tabela | currency}}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Valor Negociado</td>
                                                    <td style="text-align:right">{{Simulacao.Totalizadores[TotalizadorIndex].Valor_Total_Negociado | currency}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Desconto Real </td>
                                                    <td style="text-align:right">{{Simulacao.Totalizadores[TotalizadorIndex].Desconto_Real |number:4}}% </td>
                                                </tr>
                                                <tr>
                                                    <td>Status</td>
                                                    <td style="text-align:right">
                                                        <label class="label" ng-style="{'background-color':Simulacao.BackColorStatus,'color':Simulacao.ForeColorStatus}">{{Simulacao.Descricao_Status}}</label>
                                                    </td>
                                                </tr>
                                                <tr ng-show="Simulacao.Motivo_Recusa">
                                                    <td style="vertical-align:top">Motivo da Recusa</td>
                                                    <td>{{Simulacao.Motivo_Recusa}}</td>
                                                </tr>
                                                <tr ng-show="Simulacao.Tipo=='P' && Simulacao.Requer_Aprovacao">
                                                    <td>
                                                        <label class="label label-danger btn-block">Requer Aprovação</label>
                                                    </td>
                                                    <td>
                                                        <button ng-show="Simulacao.Requer_Aprovacao" class="btn btn-default btn-block" ng-click="MostrarAprovadores(Simulacao.Id_Simulacao)">Ver Aprovadores</button>
                                                    </td>
                                                </tr>
                                                <tr ng-show="Simulacao.Tipo=='P'">
                                                    <td colspan="2" style="text-align:center;background-color:whitesmoke">
                                                            <div class="form-group">
                                                                <p>Temperatura de Venda</p>
                                                                <input type="text" id="txtTermometro" name="txtTermometro" value="" ng-model="Simulacao.Termometro_Venda">
                                                            </div>
                                                        
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--===============================Dados de Complementares-->
            <div id="divComplementar" class="block">
                <div class="alert alert-primary alert-icon-block" role="alert">
                    <div class="alert-icon">
                        <span class="icon icon-briefcase" style="font-size:20px !important"></span>
                    </div>
                    <strong class="pull-right">Dados Complementares</strong>
                </div>

                <div class="row">
                    <!--==============================================Agencia-->
                    <div class="col-md-2" ng-controller="dictionaryController">
                        <div class="dictionary" dictionary="Agencia">
                            <input id="txtCodAgencia"
                                   ng-model="Simulacao.Cod_Agencia"
                                   ng-disabled="!Simulacao.Permite_Editar"
                                   ng-model-options="{updateOn: 'blur'}"
                                   ng-change="DicionaryValidate('txtCodAgencia')"
                                   primarybind="txtCodAgencia"
                                   secondarybind="txtNomeAgencia"
                                   extrabind="txtCnpjAgencia">
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group">
                            <label for="txtNomeAgencia" class="field-x">Razão Social</label>
                            <div class="input-group">
                                <input type="text"
                                       maxlength="50"
                                       id="txtNomeAgencia"
                                       class="form-control "
                                       ng-model="Simulacao.Nome_Agencia"
                                       ng-disabled="Simulacao.Cod_Agencia || !Simulacao.Permite_Editar">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label for="txtCnpjAgencia" class="field-x">CNPJ</label>
                            <div class="input-group">
                                <input type="text"
                                       maxlength="14"
                                       ng-disabled="Simulacao.Cod_Agencia || !Simulacao.Permite_Editar"
                                       id="txtCnpjAgencia"
                                       class="form-control cnpj"
                                       ng-model="Simulacao.Cnpj_Agencia ">
                            </div>
                        </div>
                    </div>
                    <!--=============================Comissao de Agencia-->
                    <div class="col-md-1">
                        <div class="form-group">
                            <label class="field-x" for="txtComissaoAgencia">Com.Agência</label>
                            <div class="input-group">
                                <input type="text" class="form-control percent"
                                       ng-disabled="!Simulacao.Permite_Editar"
                                       ng-model="Simulacao.Comissao_Agencia"
                                       maxlength="10"
                                       style="text-align:right"
                                       ng-model-options="{updateOn: 'blur'}" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!--==============================================Cliente-->
                    <div class="col-md-2" ng-controller="dictionaryController">
                        <div class="dictionary" dictionary="Cliente">
                            <input id="txtCodCliente"
                                   maxlength="50"
                                   ng-disabled="!Simulacao.Permite_Editar"
                                   ng-model="Simulacao.Cod_Cliente"
                                   ng-model-options="{updateOn: 'blur'}"
                                   ng-change="DicionaryValidate('txtCodCliente')"
                                   primarybind="txtCodCliente"
                                   secondarybind="txtNomeCliente"
                                   extrabind="txtCnpjCliente">
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group">
                            <label for="txtNomeCliente" class="field-x">Razao Social</label>
                            <div class="input-group">
                                <input type="text"
                                       ng-disabled="Simulacao.Cod_Cliente || !Simulacao.Permite_Editar"
                                       id="txtNomeCliente"
                                       class="form-control "
                                       ng-model="Simulacao.Nome_Cliente">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label for="txtCnpjCliente" class="field-x">CNPJ</label>
                            <div class="input-group">
                                <input type="text"
                                       maxlength="14"
                                       ng-disabled="Simulacao.Cod_Cliente || !Simulacao.Permite_Editar"
                                       id="txtCnpjCliente"
                                       class="form-control cnpj"
                                       ng-model="Simulacao.Cnpj_Cliente">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!--==============================================Contato-->
                    <div class="col-md-2" ng-controller="dictionaryController">
                        <div class="dictionary" dictionary="Contato">
                            <input id="txtCodContato"
                                   ng-model="Simulacao.Cod_Contato"
                                   ng-model-options="{updateOn: 'blur'}"
                                   ng-disabled="!Simulacao.Permite_Editar"
                                   ng-change="DicionaryValidate('txtCodContato')"
                                   primarybind="txtCodContato"
                                   secondarybind="txtNomeContato">
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group">
                            <label for="txtNomeContato" class="field-x" style="visibility:hidden">..</label>
                            <div class="input-group">
                                <input type="text" disabled="disabled" id="txtNomeContato" class="form-control " ng-model="Simulacao.Nome_Contato" ng-disabled="true">
                            </div>
                        </div>
                    </div>
                    <!--==============================================Forma de Pagamento-->
                    <div class="col-md-1">
                        <div class="form-group">
                            <label class="field-x" for="txtFormaPagamento">Forma Pgto</label>
                            <select class="form-control"
                                    ng-model="Simulacao.Forma_Pgto"
                                    ng-disabled="!Simulacao.Permite_Editar"
                                    name="txtFormaPagamento"
                                    ng-options="Forma_Pgto.Id as Forma_Pgto.Descricao for Forma_Pgto in Forma_Pgto"></select>
                        </div>
                    </div>
                    <!--==============================================Tipo Vencimento-->
                    <div class="col-md-1">
                        <div class="form-group">
                            <label class="field-x" for="txtTipoVencimento">Tipo Vcto</label>
                            <select class="form-control"
                                    ng-model="Simulacao.Tipo_Vencimento"
                                    ng-disabled="!Simulacao.Permite_Editar"
                                    name="txtFormaPagamento"
                                    ng-options="Tipo_Vencimento.Id as Tipo_Vencimento.Descricao for Tipo_Vencimento in Tipo_Vencimento"></select>
                        </div>
                    </div>
                    <!--==============================================Condicao PagtoVencimento-->
                    <div class="col-md-1">
                        <div class="form-group">
                            <label class="field-x" for="txtCondicaoPagamento">Condição</label>
                            <div class="input-group">
                                <input id="txtCondicaoPagamento"
                                       type="text" class="form-control numeric"
                                       ng-disabled="!Simulacao.Permite_Editar"
                                       maxlength="3"
                                       style="text-align:right"
                                       ng-model="Simulacao.Condicao_Pagamento"
                                       ng-model-options="{updateOn: 'blur'}" />
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <!--==============================================Obsercacao-->
                    <div class="col-md-12 margin-bottom-20">
                        <div class="form-group">
                            <label class="field-x" for="txtCondicaoPagamento">Observações</label>
                            <div class="input-group">
                                <textarea id="txtObservacao"
                                          class="form-control"
                                          ng-disabled="!Simulacao.Permite_Editar"
                                          maxlength="2000"
                                          ng-model="Simulacao.Observacao"
                                          ng-model-options="{updateOn: 'blur'}"
                                          style="min-height:80px" />
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!--================================Esquema Comercial -->
            <div class="block" id="divEsquema" ng-show="currentShow=='Base' && !Simulacao.Indica_Sem_Midia">
                <div class="alert alert-success alert-icon-block" role="alert">
                    <div class="alert-icon">
                        <span class="fa fa-book"></span>
                    </div>
                    <strong class="pull-right">Esquema Comercial</strong>
                    <button class="btn btn-default btn-icon-fixed btn-sm pull-left"
                            ng-show="Simulacao.Permite_Editar"
                            ng-disabled="!Simulacao.Validade_Inicio || !Simulacao.Validade_Termino || !Simulacao.Cod_Empresa_Venda"
                            ng-click="AdicionarEsquema()"
                            style="margin:0px 0px 0px 0px;margin-right:50px">
                        <span class="fa fa-plus" ng-disabled="true"></span> Adicionar Esquema
                    </button>

                    <button class="btn btn-default btn-icon-fixed btn-sm pull-left"
                            ng-show="Simulacao.Esquemas.length && Simulacao.Permite_Editar>0"
                            ng-disabled="!Simulacao.Validade_Inicio || !Simulacao.Validade_Termino || !Simulacao.Cod_Empresa_Venda"
                            ng-click="RemoverEsquema(0,true)"
                            style="margin:0px 0px 0px 0px;margin-right:50px">
                        <span class="fa fa-trash" ng-disabled="true"></span> Excluir Todos os Esquemas
                    </button>
                </div>
                <div ng-show="Simulacao.Esquemas.length>0">
                    <div class="row">
                        <div class="col-md-12">
                            <button style="width:180px" id="btnEsquema" class="btn btn-default margin-bottom-5 margin-right-5 btntab" ng-repeat="Esquema in Simulacao.Esquemas track by $index" ng-style="{'background-color':(Esquema.Id_Esquema==Simulacao.Esquemas[currentEsquema].Id_Esquema) ?'orange':'#e0e0e0'}" ng-click="SetCurrenEsquema(Esquema.Id_Esquema)">
                                {{Simulacao.Esquemas[$index].Nome_Rede}}
                                <br />
                                ({{$index+1}})-{{Esquema.Competencia | MesExtenso}}
                                <br />
                                {{Esquema.Valor_Total_Negociado}}
                            </button>
                        </div>
                    </div>
                    <!--lado Esquerdo do esquema-->
                    <div class="row">
                        <div class="col-md-8 padding-0">
                            <div class="block block-condensed margin-top-10">
                                <!--Botoes duplicar / Excluir Esquemas-->
                                <div class="row margin-left-10">
                                    <div class="col-md-12">
                                        <button class="btn btn-primary btn-sm" ng-click="DuplicarEsquema(Simulacao.Id_Simulacao,Simulacao.Esquemas[currentEsquema].Id_Esquema,'2')" ng-show="Simulacao.Permite_Editar">Duplicar no Período</button>
                                        <button class="btn btn-primary btn-sm" ng-click="DuplicarEsquema(Simulacao.Id_Simulacao,Simulacao.Esquemas[currentEsquema].Id_Esquema,'1')" ng-show="Simulacao.Permite_Editar">Duplicar Mês</button>
                                        <button class="btn btn-primary btn-sm" ng-click="RemoverEsquema(Simulacao.Esquemas[currentEsquema].Id_Esquema)" ng-show="Simulacao.Permite_Editar">Excluir Esquema </button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2 margin-left-20">
                                        <div ng-controller="dictionaryController">
                                            <div class="dictionary" dictionary="Rede" caption="Rede">
                                                <input id="txtIdRede"
                                                       ng-model="Simulacao.Esquemas[currentEsquema].RedeId"
                                                       ng-model-options="{updateOn: 'blur'}"
                                                        ng-change="DicionaryValidate('txtIdRede');RedeChange()"
                                                       ng-disabled="Simulacao.Esquemas[currentEsquema].Midias.length>0 || !Simulacao.Permite_Editar"
                                                       primarybind="txtIdRede"
                                                       secondarybind="txtNomeRede" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="txtNomeRede" class="field-x" style="visibility:hidden">..</label>
                                            <div class="input-group">
                                                <input type="text" disabled="disabled" id="txtNomeRede" class="form-control " ng-model="Simulacao.Esquemas[currentEsquema].Nome_Rede">
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-2">
                                        <div class="dictionary " dictionary="Competencia" caption="Competência">
                                            <input id="txtEsquemaCompetencia"
                                                   ng-model="Simulacao.Esquemas[currentEsquema].Competencia"
                                                   ng-disabled="!Simulacao.Validade_Inicio || !Simulacao.Validade_Termino || Simulacao.Esquemas[currentEsquema].Midias.length>0 || !Simulacao.Permite_Editar"
                                                   ng-change="ConsisteCompetencia(Simulacao.Esquemas[currentEsquema].Competencia)"
                                                   ui-MesAno ng-model-options="{updateOn: 'blur'}">
                                            <div class="dictionary-ui-competencia" ui-Competencia typmesano="Simulacao.Esquemas[currentEsquema].Competencia" params="CompetenciaEsquemaKeys"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="field-x" for="txtAbrangenciaEsquema">Abrangência</label>
                                            <select class="form-control"
                                                    ng-model="Simulacao.Esquemas[currentEsquema].Abrangencia"
                                                    name="txtAbrangenciaEsquema"
                                                    ng-disabled="Simulacao.Esquemas[currentEsquema].Midias.length || !Simulacao.Permite_Editar"
                                                    ng-options="Abrangencia.Id as Abrangencia.Descricao for Abrangencia in Abrangencias"
                                                    ng-change="Abrangencia_Change()"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div ng-controller="dictionaryController" ng-hide="Simulacao.Esquemas[currentEsquema].Abrangencia==0">
                                            <div class="dictionary" dictionary="Mercado" caption="Mercado">
                                                <input id="txtCodMercado"
                                                       ng-model="Simulacao.Esquemas[currentEsquema].Cod_Mercado"
                                                       ng-model-options="{updateOn: 'blur'}"
                                                       style="text-transform:uppercase"
                                                       ng-change="MercadoChange(Simulacao.Esquemas[currentEsquema].Cod_Mercado)"
                                                       ng-disabled="Simulacao.Esquemas[currentEsquema].Midias.length>0 || !Simulacao.Permite_Editar"
                                                       primarybind="txtCodMercado"
                                                       secondarybind="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <button class="btn btn-default btn-sm margin-left-20"
                                                id="btnSelecionarVeiculos"
                                                ng-click="SelecionarVeiculos()"
                                                ng-disabled="Simulacao.Esquemas[currentEsquema].Abrangencia==0 || Simulacao.Esquemas[currentEsquema].Abrangencia==-1 || !Simulacao.Permite_Editar || Simulacao.Esquemas[currentEsquema].Cod_Mercado || !Simulacao.Esquemas[currentEsquema].RedeId">
                                            Selecionar Veiculos
                                        </button>
                                        <div class="row margin-top-5 margin-left-20 margin-bottom-10" style="border:solid 1px #e5e5e5;width:95%;height:140px;overflow-y:scroll ;overflow-x:hidden">
                                            <div class="row margin-top-5"></div>
                                            <div class="col-md-3" ng-repeat="Veiculo in Simulacao.Esquemas[currentEsquema].Veiculos track by $index">
                                                <label class="label label-default labelVeiculo">
                                                    <span>
                                                        {{Veiculo.Cod_Veiculo}}-{{Veiculo.Nome_Veiculo}}
                                                    </span>
                                                    <span class="fa fa-times span-btn" style="font-size:13px" ng-click="RemoverVeiculo(Veiculo.Cod_Veiculo)" ng-show="Simulacao.Esquemas[currentEsquema].Midias.length==0  && Simulacao.Esquemas[currentEsquema].Abrangencia!=0    "></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <!--lado Direito do esquema-->
                            <div class="block block-condensed margin-top-10 margin-left-10">
                                <div class="row margin-left-20 margin-top-10">
                                    <strong>Orçamento do Mapa</strong>
                                </div>
                                <div class="row margin-left-10">
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label class="field-x" for="txtValorTabelaEsquema">Valor Tabela</label>
                                            <div class="input-group">
                                                <input id="txtValorTabelaEsquema"
                                                       type="text"
                                                       class="form-control money"
                                                       style="text-align:right"
                                                       disabled="disabled"
                                                       ng-model="Simulacao.Esquemas[currentEsquema].Valor_Total_Tabela"
                                                       ng-model-options="{updateOn: 'blur'}" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="field-x" for="txtValorNegociadoEsquema">Valor Negociado</label>
                                            <div class="input-group">
                                                <div class="input-group-addon">
                                                    <div class="app-checkbox" style="width:auto;margin-top:5px">
                                                        <label>
                                                            <input type="checkbox"
                                                                   name="app-checkbox-1"
                                                                   ng-disabled="Simulacao.Esquemas[currentEsquema].Fixar_Desconto || !Simulacao.Permite_Editar"
                                                                   ng-model="Simulacao.Esquemas[currentEsquema].Fixar_Valor"
                                                                   ng-change="ChangePendenteCalculo()"
                                                                   ng-click="Fixar('ValorEsquema')"> &nbsp;&nbsp;Fixar<span></span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <input id="txtValorNegociadoEsquema"
                                                       type="text"
                                                       ng-disabled="!Simulacao.Esquemas[currentEsquema].Fixar_Valor || Simulacao.Esquemas[currentEsquema].Fixar_Desconto || !Simulacao.Permite_Editar"
                                                       class="form-control money"
                                                       style="text-align:right"
                                                       ng-model="Simulacao.Esquemas[currentEsquema].Valor_Total_Negociado"
                                                       ng-change="ChangePendenteCalculo()"
                                                       ng-model-options="{updateOn: 'blur'}" />
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row margin-left-10">
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label class="field-x" for="txtDescontoEsquema">Desconto no Mapa</label>
                                            <div class="input-group">
                                                <div class="input-group-addon">
                                                    <div class="app-checkbox" style="width:auto;margin-top:5px">
                                                        <label>
                                                            <input type="checkbox"
                                                                   name="app-checkbox-1"
                                                                   ng-disabled="Simulacao.Esquemas[currentEsquema].Fixar_Valor || !Simulacao.Permite_Editar"
                                                                   ng-model="Simulacao.Esquemas[currentEsquema].Fixar_Desconto"
                                                                   ng-change="ChangePendenteCalculo()"
                                                                   ng-click="Fixar('DescontoEsquema')"> &nbsp;&nbsp;Fixar<span></span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <input id="txtValorDescontoEsquema"
                                                       type="text" class="form-control percent"
                                                       ng-disabled="!Simulacao.Esquemas[currentEsquema].Fixar_Desconto|| Simulacao.Esquemas[currentEsquema].Fixar_Valor || !Simulacao.Permite_Editar"
                                                       ng-model="Simulacao.Esquemas[currentEsquema].Desconto_Padrao"
                                                       ng-change="ChangePendenteCalculo()"
                                                       ng-model-options="{updateOn: 'blur'}" maxlength="5" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div ng-controller="dictionaryController">
                                            <div class="dictionary" dictionary="Empresa_Usuario" caption="Emp.Faturamento">
                                                <input id="txtCodEmpresaFaturamento"
                                                       ng-disabled="!Simulacao.Permite_Editar"
                                                       ng-model="Simulacao.Esquemas[currentEsquema].Cod_Empresa_Faturamento"
                                                       ng-model-options="{updateOn: 'blur'}"
                                                       ng-change="DicionaryValidate('txtCodEmpresaFaturamento');ChangePendenteCalculo()"
                                                       primarybind="txtCodEmpresaFaturamento" secondarybind="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin-left-10 margin-bottom-10">

                                </div>
                            </div>
                        </div> <!--//fim do lado direito do esquema-->
                    </div>
                    <!--=======================================digitacao da midia-->
                    <div class="row">
                        <div class="col-md-12">
                            <button class="btn btn-default btn-icon-fixed btn-sm"
                                    ng-disabled="!Simulacao.Esquemas[currentEsquema].Competencia || !Simulacao.Permite_Editar"
                                    ng-click="AdicionarMidia(Simulacao.Esquemas[currentEsquema])">
                                <span class="fa fa-plus" ng-disabled="true"></span> Adicionar Mídias
                            </button>
                            <div class="table table-responsive">
                                <table id="tbDigitacaoEsquema" class="table table-bordered" style="border:solid 2px #e5e5e5 !important">
                                    <thead>
                                        <tr>
                                            <td>
                                                <label>Programa</label>
                                            </td>
                                            <th>
                                                <label>Carac</label>
                                            </th>
                                            <th>
                                                <label>Tipo do Comercial</label>
                                            </th>
                                            <th>
                                                <label>Título Comercial</label>
                                            </th>
                                            <th>
                                                <label>Dur.</label>
                                            </th>
                                            <th style="min-width:80px">
                                                <label>Dia Início</label>
                                            </th>
                                            <td style="min-width:80px">
                                                <label>Dia Fim</label>
                                            </td>
                                            <td>
                                                <label>Qtd.</label>
                                            </td>
                                            <th>Distribuição</th>
                                            <th colspan="2">
                                                <label>Desc. ou Valor Informado</label>
                                            </th>
                                            <td colspan="2"></td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="midia in Simulacao.Esquemas[currentEsquema].Midias track by $index">
                                            <td>
                                                <div class="input-group" style="min-width:110px">
                                                    <input id="txtCodPrograma"
                                                           class="form-control inputEsquema"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-model="midia.Cod_Programa"
                                                           maxlength="4"
                                                           style="text-transform:uppercase"
                                                           ng-change="fnChangeMidia(midia,'Programa')">
                                                    <div class="input-group-addon" ng-show="Simulacao.Permite_Editar">
                                                        <span class="fa fa-search span-btn margin-left-10" ng-click="PesquisaTabela_Grade(midia)"></span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group " style="min-width:90px">
                                                    <input id="txtCodCaracteristica"
                                                           class="form-control inputEsquema"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-model="midia.Cod_Caracteristica"
                                                           ng-change="fnChangeMidia(midia,'Caracteristica')"
                                                           maxlength="2"
                                                           style="text-transform:uppercase">
                                                    <div class="input-group-addon" ng-show="Simulacao.Permite_Editar">
                                                        <span class="fa fa-search span-btn margin-left-10" ng-click="PesquisaCaracteristica(midia)"></span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:90px">
                                                    <input class="form-control inputEsquema"
                                                           ng-model="midia.Cod_Tipo_Comercial"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-change="fnChangeMidia(midia,'Tipo_Comercial')"
                                                           maxlength="2"
                                                           style="text-transform:uppercase">
                                                    <div class="input-group-addon" ng-show="Simulacao.Permite_Editar">
                                                        <span class="fa fa-search span-btn margin-left-10" ng-click="PesquisaTipoComercial(midia)"></span>
                                                    </div>
                                                </div>

                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:200px">
                                                    <input class="form-control inputEsquema"
                                                           placeholder="A Determinar"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-model="midia.Titulo_Comercial"
                                                           ng-change="fnChangeMidia(midia,'Titulo_Comercial')"
                                                           maxlength="30"
                                                           style="text-transform:uppercase">
                                                </div>
                                            <td>
                                                <div class="input-group" style="min-width:50px">
                                                    <input id="midiaDuracao"
                                                           class="form-control numeric inputEsquema "
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-model="midia.Duracao"
                                                           maxlength="3"
                                                           ng-change="fnChangeMidia(midia,'Duracao')"
                                                           onkeypress="return NumericOnly(event)">
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:40px">
                                                    <input type="text"
                                                           class="form-control inputEsquema"
                                                           maxlength="2"
                                                           onkeypress="return NumericOnly(event)"
                                                           ng-model="midia.Dia_Inicio"
                                                           ng-model-options="{updateOn: 'blur'}"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-change="fnChangeMidia(midia,'Dia_Inicio');FnConsisteDia(midia,'I')" />
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:40px">
                                                    <input type="text"
                                                           class="form-control  inputEsquema"
                                                           maxlength="2"
                                                           onkeypress="return NumericOnly(event)"
                                                           ng-model="midia.Dia_Fim"
                                                           ng-model-options="{updateOn: 'blur'}"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-change="fnChangeMidia(midia,'Dia_Fim');FnConsisteDia(midia,'F')" />
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:40px">
                                                    <input class="form-control inputEsquema"
                                                           ng-model="midia.Qtd_Insercoes"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-change="fnChangeMidia(midia,'Qtd_Insercoes')"
                                                           maxlength="4"
                                                           onkeypress="return NumericOnly(event)">
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:100px">
                                                    <select class="form-control inputEsquema"
                                                            ng-model="midia.Distribuicao"
                                                            ng-disabled="!Simulacao.Permite_Editar"
                                                            ng-change="fnChangeMidia(midia,'Distribuicao')"
                                                            ng-options="Distribuicao.Tipo as Distribuicao.Descricao for Distribuicao in Distribuicao">
                                                        TipoDestribuicao
                                                    </select>

                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:90px">
                                                    <input class="form-control inputEsquema"
                                                           ng-model="midia.Desconto_Informado"
                                                           style="max-width:100px"
                                                           ng-disabled="!Simulacao.Permite_Editar"
                                                           ng-change="fnControleDescontoValorMidia('Desconto',midia)"
                                                           ng-model-options="{updateOn: 'blur'}"
                                                           onblur="this.value = PercentFormat(this.value)"
                                                           onfocus="this.value = DecimalUnformat(this.value)"
                                                           onkeypress="return DecimalOnly(event)">
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group" style="min-width:90px">
                                                    <input class="form-control inputEsquema"
                                                           style="max-width:200px"
                                                           ng-model="midia.Valor_Informado"
                                                           ng-change="fnControleDescontoValorMidia('Valor',midia)"
                                                           ng-model-options="{updateOn: 'blur'}"
                                                           ng-disabled="midia.Desconto_Informado>0 || !Simulacao.Permite_Editar"
                                                           onblur="this.value = MoneyFormat(this.value)"
                                                           onfocus="this.value = DecimalUnformat(this.value)"
                                                           onkeypress="return DecimalOnly(event)">
                                                </div>
                                            </td>
                                            <td><button ng-show="Simulacao.Permite_Editar" class="btn btn-default btn-sm" style="margin:0px 0px !important" ng-click="RemoverMidia(midia)"><span class="fa fa-trash"></span></button></td>
                                            <td style="width:80px"><button class="btn btn-success btn-sm" style="margin:0px 0px !important" ng-show="!midia.IsValid" ng-click="DistrubuirInsercoes(Simulacao.Esquemas[currentEsquema] ,midia)">Ok</button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!--================Insercoes-->
                    <div class="block" id="divMidia" ng-show="currentShow=='Base' && Simulacao.Esquemas[currentEsquema].Midias.length >0">
                        <div class="alert alert-info alert-icon-block" role="alert">
                            <div class="alert-icon">
                                <span class="fa fa-camera"></span>
                            </div>
                            <strong>Mídia</strong>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-bordered" id="tbMidia">
                                <thead>
                                    <tr class="bg-warning">
                                        <th colspan="4">
                                            {{Simulacao.Esquemas[currentEsquema].Competencia | MesExtenso}}
                                        </th>
                                        <th class="td-insercoes" ng-repeat="item in Simulacao.Esquemas[currentEsquema].Midias[0].Insercoes track by $index">
                                            <span style="text-transform:initial;font-size:9px" ng-style="{'color':(item.Dia_Semana=='Dom') ?'Red':'Black'}">
                                                {{item.Dia_Semana}}
                                            </span>
                                        </th>
                                        <th colspan="5"></th>
                                    </tr>

                                    <tr class="bg-warning">

                                        <td>Programa</td>
                                        <td>Carac.</td>
                                        <td>Tipo</td>
                                        <td>Dur.</td>
                                        <td class="td-insercoes" ng-repeat="item in Simulacao.Esquemas[currentEsquema].Midias[0].Insercoes track by $index">
                                            {{item.Dia}}
                                        </td>
                                        <td>Qtd Total</td>
                                        <td>Vlr Tabela Unit.</td>
                                        <!--<td>Desc.Midia</td>-->
                                        <td>Desc. Real</td>
                                        <td>Vlr Negociado</td>
                                        <td>Critica</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="Linha in Simulacao.Esquemas[currentEsquema].Midias track by $index">
                                        <td style="min-height:40px">
                                            <span ng-show="Linha.IsValid">{{Linha.Cod_Programa | uppercase}}</span>
                                        </td>
                                        <td><span ng-show="Linha.IsValid">{{Linha.Cod_Caracteristica | uppercase}}</span></td>
                                        <td><span ng-show="Linha.IsValid">{{Linha.Cod_Tipo_Comercial | uppercase}}</span></td>
                                        <td><span ng-show="Linha.IsValid">{{Linha.Duracao}}</span></td>
                                        <td class="td-insercoes" ng-repeat="insercao in Linha.Insercoes track by $index" ng-style="{'background-color':(insercao.Tem_Grade) ?'#fff':'#f2f2f2'}">
                                            <input ng-model="insercao.Qtd"
                                                   ng-disabled="!Simulacao.Permite_Editar"
                                                   ng-model-options="{updateOn: 'blur'}"
                                                   style="width:20px;border:none;text-align:center;background-color:#fff"
                                                   maxlength="3"
                                                   ng-show="insercao.Tem_Grade"
                                                   onkeypress="return NumericOnly(event)"
                                                   ng-change="fnChangeMidia(Linha,'Qtd_Dia_Linha')">
                                        </td>
                                        <td><span ng-show="Linha.IsValid">{{Linha.Qtd_Total_Insercoes}}</span></td>
                                        <td><span ng-show="Linha.IsValid">{{Linha.Valor_Tabela_Unitario}}</span></td>
                                        <!--<td><span ng-show="Linha.IsValid">{{Linha.Desconto_Informado}}</span></td>-->
                                        <td><span class="span-btn" style="text-decoration:underline" data-toggle="tooltip" title="Detalhar Descontos" ng-show="Linha.IsValid" ng-click="DetalharDesconto(Linha)">{{Linha.Desconto_Real}}  </span></td>
                                        <td><span ng-show="Linha.IsValid">{{Linha.Valor_Negociado_Total}} </span></td>
                                        <td>
                                            <span ng-show="!Linha.Critica && Linha.IsValid" class="fa fa-check fa-2x" style="color:forestgreen"></span>
                                            <span ng-show="Linha.Critica" class="fa fa-times-circle fa-2x span-btn" ng-click="MostraCritica(Linha)" style="color:red"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div> <!--fim da div do esquema-->
        </div><!--fim da div app containter-->
        <!--========================botoes de acoes-->
        <div class="fixed-buttons-bottom">
            <div class="col-md-8">
                <button class="btn btn-default btn-sm" ng-show="Simulacao.Indica_Valoracao && Simulacao.Permite_Editar" ng-click="RecalcularSimulacao(Simulacao)">
                    Recalcular
                    <span class="app-spinner scaleout " style="background-color:red" ng-show="Simulacao.PendenteCalculo"></span>
                </button>
                <button class="btn btn-default btn-sm" ng-click="EnviarAprovacao(Simulacao.Id_Simulacao)" ng-show="Simulacao.Permite_Envio_Aprovacao && Simulacao.Requer_Aprovacao">Enviar para Aprovação</button>
                <!--Botao aprovar nao fica mais na lista, e sim nas aprovacoes pendentes-->
                <!--<button class="btn btn-default btn-sm" ng-click="AprovarProposta(Simulacao.Id_Simulacao)" ng-show="Simulacao.Permite_Aprovacao">Aprovar</button>-->
                <button class="btn btn-default btn-sm" ng-click="ImprimirMidia(Simulacao.Id_Simulacao)" ng-show="!Simulacao.Indica_Sem_Midia">Imprimir Midias</button>
                <button class="btn btn-default btn-sm" ng-click="ImprimirSimulacao(Simulacao.Id_Simulacao)" ng-show="!Simulacao.Indica_Sem_Midia">Analisar {{Descricao_Processo}}</button>
                <button class="btn btn-default btn-sm" ng-click="PreencherProposta(Simulacao.Id_Simulacao)" ng-show="Simulacao.Permite_Gerar">Enviar Proposta</button>
                <button class="btn btn-default btn-sm" ng-click="ConfirmarVenda(Simulacao.Id_Simulacao)" ng-show="Simulacao.Permite_Confirmar_Venda">Confirmar Venda</button>
                <button class="btn btn-success btn-sm" ng-click="SalvarSimulacao(Simulacao,true)" ng-show="Simulacao.Permite_Editar">Salvar</button>
                <a class="btn btn-warning btn-sm" href="#Simulacao" ng-if="Parameters.Processo=='S'"><span class="nav-icon-hexa"></span>Cancela</a>
                <a class="btn btn-warning btn-sm" href="#Proposta" ng-if="Parameters.Processo=='P'"><span class="nav-icon-hexa"></span>Cancela</a>
            </div>
            <div class="col-md-1">

            </div>
            <div class="col-md-3 pull-right hidden-mobile hidden-sm">
                <button class="btn btn-warning btn-sm anchorscroll" target="divDadosBase"><span class="icon-checkmark-circle"></span></button>
                <button class="btn btn-primary btn-sm anchorscroll" target="divComplementar"><span class="icon-briefcase"></span></button>
                <button class="btn btn-success btn-sm anchorscroll" target="divEsquema" ng-show="!Simulacao.Indica_Sem_Midia"><span class="fa fa-book"></span></button>
                <button class="btn btn-info btn-sm anchorscroll" target="divMidia" ng-show="!Simulacao.Indica_Sem_Midia"> <span class="fa fa-camera"></span></button>
            </div>
        </div>
        <!--========================Totalizador no topo-->
        <div class="totalizadores-negociacao" style="display:none">
            <div class="row">
                <div class="col-md-1">
                    <h5>Total Geral</h5>
                </div>
                <div class="col-md-3">
                    <label>Valor Tabela:</label>
                    {{Simulacao.Valor_Total_Tabela}}
                </div>
                <div class="col-md-3">
                    <label>Valor Negociado:</label>
                    {{Simulacao.Valor_Total_Negociado}}
                </div>
                <div class="col-md-2">
                    <label>Desconto Real:</label>
                    {{Simulacao.Desconto_Real | percentage:4}}
                </div>
                <div class="col-md-3">
                    <span id="btnCloseTotal" class="fa fa-times fa-2x span-btn pull-right" style="color:#e0e0e0"></span>

                    <button class="btn btn-default btn-sm" style="margin:0px 0px 0px 0px" ng-click="RecalcularSimulacao(Simulacao)" ng-show="Simulacao.PendenteCalculo && Simulacao.Indica_Valoracao">
                        Recalcular
                        <span class="app-spinner scaleout " style="background-color:red"></span>
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>
<div ng-include="'template/SelectItem.html'"></div>
<div ng-include="'template/MultiSelecaoVeiculo.html'"></div>
<div ng-include="'template/PesquisaTabela.html'"></div>
<div ng-include="'template/modalInfo.html'"></div>
<div ng-include="'template/DescontoDetalhe.html'"></div>
<div ng-include="'template/GeracaoProposta.html'"></div>


<script type="text/javascript">
    $(document).ready(function () {
        GetDictionary();
        $('.anchorscroll').click(function (e) {
            var _target = this.getAttribute("target")
            $('html, body').animate({
                scrollTop: $('#' + _target).offset().top - 50
            }, 'slow');
        });

        $("span[control_group*='icon_group']").click(function (e) {
            var _group = this.getAttribute("control_group");
            _group = _group.replace('icon', 'input');
            var el = document.querySelector('[control_group="' + _group + '"]');
            if ($(el).is(':disabled')) {
                event.stopPropagation();
            };
        });
        $('[data-toggle="tooltip"]').tooltip();
        $('#btnCloseTotal').click(function () {
            $('.totalizadores-negociacao').css("display", 'none');
            $('#btnFixarTopo').css("display", 'inline-block');
        });
        $('#btnFixarTopo').click(function () {
            $('.totalizadores-negociacao').css("display", 'block');
            $('#btnFixarTopo').css("display", 'none');
        });

        $(".percent").blur(function () {
            if (DoubleVal(this.value)> 100) {
                ShowAlert("Valor nao pode ser superior a 100%")
                var ctrl = angular.element(this).data('$ngModelController');
                this.value = "";
                ctrl.$setViewValue();
                ctrl.$commitViewValue();
            }
        });
    });
    function InitTermometro(pValue, pDisable) {
        $("#txtTermometro").ionRangeSlider({
            grid: true,
            min: 0,
            max: 100,
            from: pValue,
            postfix: "%",
            disable: pDisable,

        });
    };
</script>
